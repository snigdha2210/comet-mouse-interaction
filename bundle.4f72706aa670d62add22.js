(()=>{let e,n,t,i,r,o,u,a,d={x:0,y:0},w=new THREE.TextureLoader;function l(e){i.setSize(window.innerWidth,window.innerHeight),r.u_resolution.value.x=i.domElement.width,r.u_resolution.value.y=i.domElement.height,u=new THREE.WebGLRenderTarget(.2*window.innerWidth,.2*window.innerHeight),a=new THREE.WebGLRenderTarget(.2*window.innerWidth,.2*window.innerHeight)}function s(e){requestAnimationFrame(s),function(e){r.u_mouse.value.x+=.1*(d.x-r.u_mouse.value.x),r.u_mouse.value.y+=.1*(d.y-r.u_mouse.value.y),r.u_time.value=5e-4*e,i.render(t,n),function(e){let o=r.u_resolution.value.clone();r.u_resolution.value.x=.2*window.innerWidth,r.u_resolution.value.y=.2*window.innerHeight,r.u_buffer.value=a.texture,r.u_renderpass.value=!0,window.rtTexture=u,i.setRenderTarget(u),i.render(t,n,u,!0);let d=u;u=a,a=d,r.u_buffer.value=u.texture,r.u_resolution.value=o,r.u_renderpass.value=!1}(),v&&E.capture(i.domElement)}(e)}w.setCrossOrigin("anonymous"),w.load("https://s3-us-west-2.amazonaws.com/s.cdpn.io/982762/noise.png",(function(w){o=w,o.wrapS=THREE.RepeatWrapping,o.wrapT=THREE.RepeatWrapping,o.minFilter=THREE.LinearFilter,function(){e=document.getElementById("container"),n=new THREE.Camera,n.position.z=1,t=new THREE.Scene;var w=new THREE.PlaneBufferGeometry(2,2);u=new THREE.WebGLRenderTarget(.2*window.innerWidth,.2*window.innerHeight),a=new THREE.WebGLRenderTarget(.2*window.innerWidth,.2*window.innerHeight),r={u_time:{type:"f",value:1},u_resolution:{type:"v2",value:new THREE.Vector2},u_noise:{type:"t",value:o},u_buffer:{type:"t",value:u.texture},u_mouse:{type:"v2",value:new THREE.Vector2},u_renderpass:{type:"b",value:!1}};var s=new THREE.ShaderMaterial({uniforms:r,vertexShader:document.getElementById("vertexShader").textContent,fragmentShader:document.getElementById("fragmentShader").textContent});s.extensions.derivatives=!0;var E=new THREE.Mesh(w,s);t.add(E),i=new THREE.WebGLRenderer,i.setPixelRatio(window.devicePixelRatio),e.appendChild(i.domElement),l(),window.addEventListener("resize",l,!1),document.addEventListener("pointermove",(e=>{let n=window.innerHeight/window.innerWidth;d.x=(e.pageX-window.innerWidth/2)/window.innerWidth/n,d.y=(e.pageY-window.innerHeight/2)/window.innerHeight*-1,e.preventDefault()}))}(),s()}));let E=new CCapture({verbose:!0,framerate:60,quality:90,format:"webm",workersPath:"js/"}),v=!1;isCapturing=function(e){!1===e&&!0===window.capturing?(E.stop(),E.save()):!0===e&&!1===window.capturing&&E.start(),v=e},toggleCapture=function(){isCapturing(!v)},window.addEventListener("keyup",(function(e){68==e.keyCode&&toggleCapture()}))})();
//# sourceMappingURL=bundle.4f72706aa670d62add22.js.map